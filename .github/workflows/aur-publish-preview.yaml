name: Publish Preview AUR Package 

on:
  # 在Build Beta Package完成后触发
  workflow_run:
    workflows: ["Build Beta Package"]
    types:
      - completed
  # 推动tag后触发
  push:
    tags:
      - "*"

jobs:
    aur-publish:
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v2
      
          - name: Publish AUR package
            uses: anas-elgarhy/aur-release-action@v4.1
            with:
              package_name: eco-paste-beta-bin
              ssh_private_key: ${{ secrets.AUR_SSH_PRIVATE_KEY }}
              pkgbuild_path: aur/preview/PKGBUILD
              try_build_and_install: true
              git_username: witt
              git_email: 1989161762@qq.com
              commit_message: "feat: Update %FILENAME% to %VERSION% by Github Action ."